<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>LDBigSegmentsOptions | LaunchDarkly Server-Side Node SDK (7.0.0)</title><meta name="description" content="Documentation for LaunchDarkly Server-Side Node SDK (7.0.0)"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">LaunchDarkly Server-Side Node SDK (7.0.0)</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../index.html">LaunchDarkly Server-Side Node SDK (7.0.0)</a></li><li><a href="../modules/_launchdarkly_node_server_sdk_.html">&quot;launchdarkly-node-server-sdk&quot;</a></li><li><a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html">LDBigSegmentsOptions</a></li></ul><h1>Interface LDBigSegmentsOptions</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>Additional parameters for configuring the SDK&#39;s Big Segments behavior.</p>
</div><div><p>Big Segments are a specific type of user segments. For more information, read the LaunchDarkly
documentation: <a href="https://docs.launchdarkly.com/home/users/big-segments">https://docs.launchdarkly.com/home/users/big-segments</a></p>
</div><dl class="tsd-comment-tags"><dt>see</dt><dd><p><a href="_launchdarkly_node_server_sdk_.LDOptions.html#bigSegments">LDOptions.bigSegments</a></p>
</dd></dl></div></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">LDBigSegmentsOptions</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-interface"><a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html#staleAfter" class="tsd-kind-icon">stale<wbr/>After</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html#statusPollInterval" class="tsd-kind-icon">status<wbr/>Poll<wbr/>Interval</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html#userCacheSize" class="tsd-kind-icon">user<wbr/>Cache<wbr/>Size</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html#userCacheTime" class="tsd-kind-icon">user<wbr/>Cache<wbr/>Time</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-interface"><a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html#store" class="tsd-kind-icon">store</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="staleAfter" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> stale<wbr/>After<a href="#staleAfter" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">stale<wbr/>After<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in index.d.ts:558</li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The maximum length of time between updates of the Big Segments data before the data is
considered out of date, in seconds.</p>
</div><div><p>Normally, the LaunchDarkly Relay Proxy updates a timestamp in the Big Segment store at intervals to
confirm that it is still in sync with the LaunchDarkly data, even if there have been no changes to the
If the timestamp falls behind the current time by the amount specified in <code>staleAfter</code>, the SDK
assumes that something is not working correctly in this process and that the data may not be accurate.</p>
<p>While in a stale state, the SDK will still continue using the last known data, but the status from
{@link interfaces.BigSegmentStoreStatusProvider.getStatus} will have <code>stale: true</code>, and any
<a href="_launchdarkly_node_server_sdk_.LDEvaluationReason.html">LDEvaluationReason</a> generated from a feature flag that references a Big Segment will have a
<code>bigSegmentsStatus</code> of <code>&quot;STALE&quot;</code>.</p>
<p>If not specified, the default value is 120 (two minutes). Zero or negative values are changed to
the default.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="statusPollInterval" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> status<wbr/>Poll<wbr/>Interval<a href="#statusPollInterval" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">status<wbr/>Poll<wbr/>Interval<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in index.d.ts:539</li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The interval at which the SDK will poll the Big Segment store to make sure it is available
and to determine how long ago it was updated, in seconds.</p>
</div><div><p>If not specified, the default value is 5. Zero or negative values are changed to the default.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="userCacheSize" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> user<wbr/>Cache<wbr/>Size<a href="#userCacheSize" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">user<wbr/>Cache<wbr/>Size<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in index.d.ts:519</li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The maximum number of users whose Big Segment state will be cached by the SDK at any given time.</p>
</div><div><p>To reduce database traffic, the SDK maintains a least-recently-used cache by user key. When a feature
flag that references a Big Segment is evaluated for some user who is not currently in the cache, the
SDK queries the database for all Big Segment memberships of that user, and stores them together in a
single cache entry. If the cache is full, the oldest entry is dropped.</p>
<p>A higher value for <code>userCacheSize</code> means that database queries for Big Segments will be done
less often for recently-referenced users, if the application has many users, at the cost of
increased memory used by the cache.</p>
<p>Cache entries can also expire based on the setting of <a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html#userCacheTime">userCacheTime</a>.</p>
<p>If not specified, the default value is 1000.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="userCacheTime" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> user<wbr/>Cache<wbr/>Time<a href="#userCacheTime" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">user<wbr/>Cache<wbr/>Time<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in index.d.ts:531</li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The maximum length of time that the Big Segment state for a user will be cached by the SDK,
in seconds.</p>
</div><div><p>See <a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html#userCacheSize">userCacheSize</a> for more about this cache. A higher value for <code>userCacheTime</code> means
that database queries for the Big Segment state of any given user will be done less often, but
that changes to segment membership may not be detected as soon.</p>
<p>If not specified, the default value is 5. Negative values are changed to the default.</p>
</div></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="store" class="tsd-anchor"></a><h3 class="tsd-anchor-link">store<a href="#store" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">store<span class="tsd-signature-symbol">(</span>options<span class="tsd-signature-symbol">: </span><a href="_launchdarkly_node_server_sdk_.LDOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">LDOptions</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="_launchdarkly_node_server_sdk_interfaces_.BigSegmentStore.html" class="tsd-signature-type" data-tsd-kind="Interface">BigSegmentStore</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in index.d.ts:501</li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Specifies the storage component that provides Big Segments data.</p>
</div><div><p>This property is mandatory. It must be obtained from one of the SDK&#39;s database integrations,
such as <a href="https://github.com/launchdarkly/node-server-sdk-redis">https://github.com/launchdarkly/node-server-sdk-redis</a>. You will normally specify a
database implementation that matches how the LaunchDarkly Relay Proxy is configured, since the
Relay Proxy manages the Big Segment data.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>options: <a href="_launchdarkly_node_server_sdk_.LDOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">LDOptions</a></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="_launchdarkly_node_server_sdk_interfaces_.BigSegmentStore.html" class="tsd-signature-type" data-tsd-kind="Interface">BigSegmentStore</a></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../index.html">Exports</a></li><li class="current tsd-kind-namespace"><a href="../modules/_launchdarkly_node_server_sdk_.html">&quot;launchdarkly-<wbr/>node-<wbr/>server-<wbr/>sdk&quot;</a><ul><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/_launchdarkly_node_server_sdk_.errors.html">errors</a></li></ul></li><li class=" tsd-kind-namespace"><a href="../modules/_launchdarkly_node_server_sdk_integrations_.html">&quot;launchdarkly-<wbr/>node-<wbr/>server-<wbr/>sdk/integrations&quot;</a></li><li class=" tsd-kind-namespace"><a href="../modules/_launchdarkly_node_server_sdk_interfaces_.html">&quot;launchdarkly-<wbr/>node-<wbr/>server-<wbr/>sdk/interfaces&quot;</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-interface tsd-parent-kind-namespace"><a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html" class="tsd-kind-icon">LDBig<wbr/>Segments<wbr/>Options</a><ul><li class="tsd-kind-property tsd-parent-kind-interface"><a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html#staleAfter" class="tsd-kind-icon">stale<wbr/>After</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html#statusPollInterval" class="tsd-kind-icon">status<wbr/>Poll<wbr/>Interval</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html#userCacheSize" class="tsd-kind-icon">user<wbr/>Cache<wbr/>Size</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html#userCacheTime" class="tsd-kind-icon">user<wbr/>Cache<wbr/>Time</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="_launchdarkly_node_server_sdk_.LDBigSegmentsOptions.html#store" class="tsd-kind-icon">store</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>